<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style>
        *{
            margin: 0;
            padding:0;
        }
        #div1{
            width: 100px;
            height: 100px;
            position: relative;
            background-color: red;
        }
    </style>

</head>
<body>
<div id="div1">div</div>
<script>
  var oDiv = document.getElementById('div1');
  var iDisx = iDisy = 0;
    oDiv.onmousedown = function(e){//e:事件对象  用来获取与事件有关的东西 事件（抽象的，是一个对象e），事件源（触发事件的对象oDiv），事件处理函数
        e = e || window.event;//能力检测
        iDisx = e.clientX - oDiv.offsetLeft;
        iDisy = e.clientY - oDiv.offsetTop;
        document.onmousemove = function(e){
            e = e || window.event();
            var iLeft = e.clientX - iDisx;//e.clientX可以获取鼠标距离浏览器左边的距离
            var iTop = e.clientY - iDisy;
            if(iLeft<0){
                iLeft = 0;
            }
            if(iLeft>document.documentElement.clientWidth /*获取浏览器文本的宽度*/-oDiv.offsetWidth)
            iLeft = document.documentElement.clientWidth-oDiv.offsetWidth;
            if(iTop<0){
                iTop=0;
            }
            if(iTop>document.documentElement.clientHeight -oDiv.offsetHeight)
                iTop = document.documentElement.clientHeight-oDiv.offsetHeight;
            oDiv.style.left = iLeft + 'px';
            oDiv.style.top = iTop + 'px';
        };
        document.onmouseup = function(){
            document.onmousemove = null;
            document.onmouseup = null;
        };
    };
</script>
</body>
</html>